{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the SubLime Marketplace.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user entity." },
        "email": { "type": "string", "description": "User's email address.", "format": "email" },
        "name": { "type": "string", "description": "User's full name." },
        "createdAt": { "type": "string", "description": "Timestamp indicating when the user account was created.", "format": "date-time" },
        "storeCredit": { "type": "number", "description": "The amount of store credit the user has in PKR." },
        "emailVerified": { "type": "boolean", "description": "Indicates if the user has verified their email address." }
      },
      "required": ["id", "email", "name", "createdAt", "emailVerified"]
    },
    "Subscription": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subscription",
      "type": "object",
      "description": "Represents a digital subscription offered on the marketplace.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the subscription entity." },
        "name": { "type": "string", "description": "Name of the subscription (e.g., Netflix Premium)." },
        "description": { "type": "string", "description": "Detailed description of the subscription benefits and features." },
        "price": { "type": "number", "description": "The base price of the subscription in PKR." },
        "discountedPrice": { "type": "number", "description": "The discounted price of the subscription in PKR (optional)." },
        "imageUrl": { "type": "string", "description": "URL of the image representing the subscription.", "format": "uri" },
        "categoryId": { "type": "string", "description": "Reference to Category. (Relationship: Category 1:N Subscription)" },
        "variants": {
          "type": "array",
          "description": "Different versions or plans for the subscription (e.g., 1 month, 6 months).",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string", "description": "Name of the variant (e.g., '1 Month')." },
              "price": { "type": "number", "description": "Price of this specific variant in PKR." }
            },
            "required": ["name", "price"]
          }
        }
      },
      "required": ["id", "name", "description", "price", "imageUrl", "categoryId"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of subscriptions (e.g., Entertainment, Music).",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the category entity." },
        "name": { "type": "string", "description": "Name of the category (e.g., Entertainment)." },
        "imageUrl": { "type": "string", "description": "URL of the image representing the category.", "format": "uri" }
      },
      "required": ["id", "name", "imageUrl"]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a user for a subscription.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the order entity." },
        "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Order)" },
        "items": { "type": "array", "description": "An array of items included in the order.", "items": { "$ref": "#/entities/CartItem" }},
        "customerName": { "type": "string", "description": "The name of the customer who placed the order." },
        "customerEmail": { "type": "string", "description": "The email of the customer.", "format": "email" },
        "customerPhone": { "type": "string", "description": "The phone number of the customer." },
        "subtotal": { "type": "number", "description": "The subtotal of the order before discounts and taxes." },
        "creditUsed": { "type": "number", "description": "The amount of store credit used for the order." },
        "totalAmount": { "type": "number", "description": "The final amount paid after applying credits." },
        "paymentScreenshotUrl": { "type": "string", "description": "URL of the uploaded payment screenshot.", "format": "uri" },
        "orderDate": { "type": "string", "description": "Date when the order was placed.", "format": "date-time" },
        "status": { "type": "string", "description": "Status of the order (e.g., pending, completed, cancelled)." }
      },
      "required": ["id", "userId", "items", "customerName", "customerEmail", "subtotal", "totalAmount", "orderDate", "status"]
    },
    "LegalPage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Legal Page",
      "type": "object",
      "description": "Represents a legal document page like Terms of Service or Privacy Policy.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the legal page (e.g., 'terms', 'privacy')." },
        "title": { "type": "string", "description": "The title of the legal page." },
        "content": { "type": "string", "description": "The full HTML or Markdown content of the page." }
      },
      "required": ["id", "title", "content"]
    },
    "MenuItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Menu Item",
      "type": "object",
      "description": "Represents a single item in a navigation menu.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the menu item." },
        "label": { "type": "string", "description": "The text to display for the menu item." },
        "href": { "type": "string", "description": "The URL path the menu item links to." },
        "order": { "type": "number", "description": "The display order of the menu item." }
      },
      "required": ["id", "label", "href", "order"]
    },
    "CartItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Cart Item",
      "type": "object",
      "description": "Represents an item in a user's shopping cart.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the cart item." },
        "subscriptionId": { "type": "string", "description": "Reference to the Subscription." },
        "subscriptionName": { "type": "string", "description": "Name of the subscription." },
        "variantName": { "type": "string", "description": "Name of the selected variant." },
        "price": { "type": "number", "description": "Price of the variant at the time of adding to cart." },
        "quantity": { "type": "number", "description": "Quantity of the item." },
        "imageUrl": { "type": "string", "description": "Image URL of the subscription." }
      },
      "required": ["id", "subscriptionId", "subscriptionName", "variantName", "price", "quantity", "imageUrl"]
    },
    "AppSettings": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "App Settings",
        "type": "object",
        "description": "Stores global application settings, such as payment details.",
        "properties": {
            "bankName": { "type": "string", "description": "The name of the bank for payments." },
            "accountNumber": { "type": "string", "description": "The bank account number." },
            "accountHolderName": { "type": "string", "description": "The name of the account holder." }
        },
        "required": ["bankName", "accountNumber", "accountHolderName"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "entityName": "User", "schema": { "$ref": "#/entities/User" }, "description": "Stores user profiles." }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": { "entityName": "Category", "schema": { "$ref": "#/entities/Category" }, "description": "Stores subscription categories." }
      },
      {
        "path": "/subscriptions/{subscriptionId}",
        "definition": { "entityName": "Subscription", "schema": { "$ref": "#/entities/Subscription" }, "description": "Stores subscription details." }
      },
      {
        "path": "/orders/{orderId}",
        "definition": { "entityName": "Order", "schema": { "$ref": "#/entities/Order" }, "description": "Stores order information for all users." }
      },
       {
        "path": "/users/{userId}/cart/{cartItemId}",
        "definition": { "entityName": "CartItem", "schema": { "$ref": "#/entities/CartItem" }, "description": "Stores items in a user's shopping cart." }
      },
      {
        "path": "/legalPages/{pageId}",
        "definition": { "entityName": "LegalPage", "schema": { "$ref": "#/entities/LegalPage" }, "description": "Stores content for legal pages." }
      },
      {
        "path": "/menuItems/{menuItemId}",
        "definition": { "entityName": "MenuItem", "schema": { "$ref": "#/entities/MenuItem" }, "description": "Stores navigation menu items." }
      },
      {
        "path": "/settings/payment",
        "definition": { "entityName": "AppSettings", "schema": { "$ref": "#/entities/AppSettings" }, "description": "Stores application settings like payment details." }
      }
    ]
  }
}
