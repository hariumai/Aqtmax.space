
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of AQT Max.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user entity." },
        "email": { "type": "string", "description": "User's email address.", "format": "email" },
        "name": { "type": "string", "description": "User's full name." },
        "phone": { "type": "string", "description": "User's phone number." },
        "createdAt": { "type": "string", "description": "Timestamp indicating when the user account was created.", "format": "date-time" },
        "emailVerified": { "type": "boolean", "description": "Indicates if the user has verified their email address." },
        "ban": {
          "type": "object",
          "description": "Details regarding a user's ban status.",
          "properties": {
            "isBanned": { "type": "boolean", "description": "Whether the user is currently banned." },
            "type": { "type": "string", "enum": ["temporary", "permanent"], "description": "The type of ban." },
            "reason": { "type": "string", "description": "The reason for the ban." },
            "expiresAt": { "type": "string", "format": "date-time", "description": "When the ban expires." },
            "appealRequested": { "type": "boolean", "description": "Whether the user has requested an appeal." },
            "appealMessage": { "type": "string", "description": "The user's appeal message." },
            "appealStatus": { "type": "string", "enum": ["pending", "approved", "rejected"], "description": "The status of the user's appeal." },
            "unbanAt": { "type": "string", "format": "date-time", "description": "Timestamp for when a scheduled unban will occur." },
            "appealDecision": { "type": "string", "description": "The admin's decision or notes regarding the appeal." }
          }
        }
      },
      "required": ["id", "email", "name", "createdAt", "emailVerified"]
    },
    "Subscription": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subscription",
      "type": "object",
      "description": "Represents a digital subscription offered on the marketplace.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the subscription entity." },
        "name": { "type": "string", "description": "Name of the subscription (e.g., Netflix Premium)." },
        "description": { "type": "string", "description": "Detailed description of the subscription benefits and features." },
        "price": { "type": "number", "description": "The base price of the subscription in PKR." },
        "imageUrl": { "type": "string", "description": "URL of the image representing the subscription.", "format": "uri" },
        "categoryId": { "type": "string", "description": "Reference to Category. (Relationship: Category 1:N Subscription)" },
        "variantGroups": {
          "type": "array",
          "description": "Defines the groups of options available, like 'Screens' or 'Duration'.",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string", "description": "Name of the variant group (e.g., 'Screens')." },
              "options": {
                "type": "array",
                "description": "List of possible options in this group.",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": { "type": "string" }
                  },
                  "required": ["name"]
                }
              }
            },
            "required": ["name", "options"]
          }
        },
        "variantMatrix": {
          "type": "array",
          "description": "Defines all valid combinations of variants and their specific prices.",
          "items": {
            "type": "object",
            "properties": {
              "options": {
                "type": "object",
                "description": "A key-value map where the key is the groupName and value is the selected optionName.",
                "additionalProperties": { "type": "string" }
              },
              "price": { "type": "number", "description": "Price for this specific combination in PKR." },
              "inStock": { "type": "boolean", "description": "Whether this specific combination is available." }
            },
            "required": ["options", "price", "inStock"]
          }
        }
      },
      "required": ["id", "name", "price", "categoryId"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of subscriptions (e.g., Entertainment, Music).",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the category entity." },
        "name": { "type": "string", "description": "Name of the category (eg., Entertainment)." },
        "imageUrl": { "type": "string", "description": "URL of the image representing the category.", "format": "uri" }
      },
      "required": ["id", "name"]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a user for a subscription.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the order entity." },
        "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:N Order)" },
        "items": { "type": "array", "description": "An array of items included in the order.", "items": { "$ref": "#/entities/CartItem" }},
        "customerName": { "type": "string", "description": "The name of the customer who placed the order." },
        "customerEmail": { "type": "string", "description": "The email of the customer.", "format": "email" },
        "customerPhone": { "type": "string", "description": "The phone number of the customer." },
        "subtotal": { "type": "number", "description": "The subtotal of the order before discounts and taxes." },
        "totalAmount": { "type": "number", "description": "The final amount paid." },
        "paymentScreenshotUrl": { "type": "string", "description": "URL of the uploaded payment screenshot.", "format": "uri" },
        "orderDate": { "type": "string", "description": "Date when the order was placed.", "format": "date-time" },
        "status": { "type": "string", "description": "Status of the order (e.g., pending, completed, cancelled)." },
        "credentials": {
            "type": "object",
            "description": "Credentials for the delivered subscription account.",
            "properties": {
                "username": { "type": "string", "description": "Username or email for the account." },
                "password": { "type": "string", "description": "Password for the account." }
            }
        },
        "note": { "type": "string", "description": "A note from the admin to the customer regarding the order." }
      },
      "required": ["id", "userId", "items", "customerName", "customerEmail", "subtotal", "totalAmount", "orderDate", "status"]
    },
    "LegalPage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Legal Page",
      "type": "object",
      "description": "Represents a legal document page like Terms of Service or Privacy Policy.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the legal page (e.g., 'terms', 'privacy')." },
        "title": { "type": "string", "description": "The title of the legal page." },
        "content": { "type": "string", "description": "The full HTML or Markdown content of the page." }
      },
      "required": ["id", "title", "content"]
    },
    "MenuItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Menu Item",
      "type": "object",
      "description": "Represents a single item in a navigation menu.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the menu item." },
        "label": { "type": "string", "description": "The text to display for the menu item." },
        "href": { "type": "string", "description": "The URL path the menu item links to." },
        "order": { "type": "number", "description": "The display order of the menu item." }
      },
      "required": ["id", "label", "href", "order"]
    },
    "CartItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Cart Item",
      "type": "object",
      "description": "Represents an item in a user's shopping cart.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the cart item." },
        "subscriptionId": { "type": "string", "description": "Reference to the Subscription." },
        "subscriptionName": { "type": "string", "description": "Name of the subscription." },
        "variantName": { "type": "string", "description": "A concatenated string of selected variant options (e.g., 'Large / Red')." },
        "price": { "type": "number", "description": "Price of the selected variant combination." },
        "quantity": { "type": "number", "description": "Quantity of the item." },
        "imageUrl": { "type": "string", "description": "Image URL of the subscription." }
      },
      "required": ["id", "subscriptionId", "subscriptionName", "variantName", "price", "quantity"]
    },
    "AppSettings": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "App Settings",
        "type": "object",
        "description": "Stores global application settings, such as payment details and support contacts.",
        "properties": {
            "bankName": { "type": "string", "description": "The name of the bank for payments." },
            "accountNumber": { "type": "string", "description": "The bank account number." },
            "accountHolderName": { "type": "string", "description": "The name of the account holder." },
            "whatsappNumber": { "type": "string", "description": "The contact number for WhatsApp support." }
        },
        "required": ["bankName", "accountNumber", "accountHolderName"]
    },
    "Notification": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Notification",
      "type": "object",
      "description": "Represents a notification for a user.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the notification." },
        "userId": { "type": "string", "description": "The ID of the user this notification is for." },
        "message": { "type": "string", "description": "The content of the notification message." },
        "href": { "type": "string", "description": "A URL path for the notification to link to." },
        "createdAt": { "type": "string", "description": "Timestamp when the notification was created.", "format": "date-time" },
        "read": { "type": "boolean", "description": "Indicates if the user has read the notification." },
        "browser": { "type": "string", "description": "Browser and OS information of the user's device." }
      },
      "required": ["id", "userId", "message", "createdAt", "read"]
    },
    "ContactSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Contact Submission",
      "type": "object",
      "description": "Represents a submission from the contact us form.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the submission." },
        "name": { "type": "string", "description": "Name of the person submitting the form." },
        "email": { "type": "string", "description": "Email of the person submitting the form.", "format": "email" },
        "subject": { "type": "string", "description": "Subject of the message." },
        "message": { "type": "string", "description": "The message content." },
        "submittedAt": { "type": "string", "description": "Timestamp when the form was submitted.", "format": "date-time" },
        "isRead": { "type": "boolean", "description": "Indicates if an admin has read the submission." }
      },
      "required": ["id", "name", "email", "subject", "message", "submittedAt", "isRead"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "entityName": "User", "schema": { "$ref": "#/entities/User" }, "description": "Stores user profiles." }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": { "entityName": "Category", "schema": { "$ref": "#/entities/Category" }, "description": "Stores subscription categories." }
      },
      {
        "path": "/subscriptions/{subscriptionId}",
        "definition": { "entityName": "Subscription", "schema": { "$ref": "#/entities/Subscription" }, "description": "Stores subscription details." }
      },
      {
        "path": "/orders/{orderId}",
        "definition": { "entityName": "Order", "schema": { "$ref": "#/entities/Order" }, "description": "Stores order information for all users." }
      },
       {
        "path": "/users/{userId}/cart/{cartItemId}",
        "definition": { "entityName": "CartItem", "schema": { "$ref": "#/entities/CartItem" }, "description": "Stores items in a user's shopping cart." }
      },
      {
        "path": "/legalPages/{pageId}",
        "definition": { "entityName": "LegalPage", "schema": { "$ref": "#/entities/LegalPage" }, "description": "Stores content for legal pages." }
      },
      {
        "path": "/menuItems/{menuItemId}",
        "definition": { "entityName": "MenuItem", "schema": { "$ref": "#/entities/MenuItem" }, "description": "Stores navigation menu items." }
      },
      {
        "path": "/settings/payment",
        "definition": { "entityName": "AppSettings", "schema": { "$ref": "#/entities/AppSettings" }, "description": "Stores application settings like payment details." }
      },
      {
        "path": "/users/{userId}/notifications/{notificationId}",
        "definition": { "entityName": "Notification", "schema": { "$ref": "#/entities/Notification" }, "description": "Stores user-specific notifications." }
      },
      {
        "path": "/contactSubmissions/{submissionId}",
        "definition": { "entityName": "ContactSubmission", "schema": { "$ref": "#/entities/ContactSubmission" }, "description": "Stores submissions from the contact form." }
      }
    ]
  }
}

    